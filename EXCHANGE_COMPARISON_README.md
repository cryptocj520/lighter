# 交易所资金费率对比工具

## 功能概述

`exchange_comparison.py` 是一个专为加密货币交易者设计的工具，能够实时对比 zkLighter 和 Backpack 两个交易所的市场数据。主要功能包括：

- 同时显示两个交易所的实时价格数据
- 对比两个交易所的资金费率差异
- 自动识别潜在的资金费率套利机会
- 按资金费率差值大小排序，方便快速发现最佳套利机会
- 使用护眼绿色界面，减轻长时间盯盘的视觉疲劳

## 安装依赖

在运行脚本前，请确保已安装以下依赖：

```bash
pip3 install websockets httpx prettytable
```

## 使用方法

直接运行脚本即可：

```bash
python3 exchange_comparison.py
```

程序会自动连接到两个交易所的API，并开始实时更新和显示数据。

按 `Ctrl+C` 可以退出程序。

## 数据更新频率

- **价格数据**：通过WebSocket实时更新，只要交易所推送新数据就会立即更新
- **Backpack资金费率**：每60秒通过REST API刷新一次
- **zkLighter资金费率**：通过WebSocket实时更新
- **表格显示**：每3秒刷新一次

## 表格数据说明

表格中显示的数据包括：

| 列名 | 说明 |
|------|------|
| 币种 | 交易对的基础货币名称 |
| zkLighter价格 | zkLighter交易所的最新成交价格 |
| Backpack价格 | Backpack交易所的最新成交价格 |
| zkLighter资金费率 | zkLighter的资金费率（已调整为8小时周期，便于对比） |
| Backpack资金费率 | Backpack的资金费率（8小时周期） |
| 资金费率差值 | 两个交易所之间的资金费率差异 |
| 套利机会 | 当资金费率差值绝对值大于0.05%时，标记为有套利机会 |

## 资金费率说明

- **zkLighter** 原始数据为1小时收取一次的资金费率，在显示时已乘以8进行调整，以便与Backpack公平对比
- **Backpack** 为8小时收取一次的资金费率

## 排序逻辑

表格按照资金费率差值的**绝对值**从大到小排序，这样可以让套利机会最大的币种显示在最前面。差值的正负表示：
- **正值**：zkLighter的资金费率大于Backpack
- **负值**：Backpack的资金费率大于zkLighter

## 套利策略提示

理想的套利策略是：
1. 在资金费率为**正**的交易所做**空**，同时在资金费率为**负**的交易所做**多**
2. 这样可以在两边都收取资金费率，同时市场价格风险相互对冲

## 注意事项

- 此工具仅提供数据对比，不代表投资建议
- 实际套利时需考虑交易手续费、滑点以及价格差异
- 请确保您了解永续合约的交易机制和风险 